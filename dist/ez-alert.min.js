"use_strict";angular.module("ez.alert",[]).constant("EzAlertConfig",{successClass:"alert alert-success",warningClass:"alert alert-warning",errorClass:"alert alert-danger",delay:8e3,maxAlerts:5,insertFirst:!0}).directive("ezAlert",["EzAlert",function(a){return{restrict:"EA",templateUrl:"ez-alert-tpl.html",link:function(b){b.$watch(a.get,function(){b.alerts=a.get()}),b.hideAlert=function(c){a.hide(b.alerts[c],0)}}}}]).service("EzAlert",["$interval","EzAlertConfig",function(a,b){var c=[];return{clear:function(){c=[]},get:function(){return c},error:function(a,b){this.add("error",a,b)},warning:function(a,b){this.add("warning",a,b)},success:function(a,b){this.add("success",a,b)},add:function(d,e,f){var g={alertClass:b[d+"Class"],msg:e},h=this.findDuplicates(g,f);h||(a(function(){g.show=!0},1,1),this.hideExcessAlerts(this,!0),b.insertFirst?c.unshift(g):c.push(g),f||this.hide(g,b.delay))},findDuplicates:function(a,b){for(var d=this,e=0,f=c.length;f>e;e++){var g=c[e];if(g.alertClass===a.alertClass&&g.msg===a.msg)return b||(g.resetDelay=!0),d.hideAndShow(g),!0}return!1},hideExcessAlerts:function(d,e){if(c.length>=b.maxAlerts)for(var f=c.length-b.maxAlerts+1,g=0,h=f;h>g;g++)b.insertFirst?d.hide(c[c.length-(g+1)],0,!0):d.hide(c[g],0,!0);e||a(function(){d.hideExcessAlerts(d,!1)},100,1)},hide:function(d,e,f){var g=this,h=f?1e3:e+1e3;a(function(){return d.resetDelay?(delete d.resetDelay,void g.hide(d,e,f)):(d.show=!1,void(d.hide=!0))},e,1),a(function(){b.insertFirst?c.pop():c.shift()},h,1)},hideAndShow:function(c){var d=this;c.show=!1,c.hide=!0,a(function(){c.hide=!1,c.show=!0},500,1),a(function(){return c.resetDelay?(delete c.resetDelay,void d.hide(c,b.delay)):void 0},5,100)}}}]);