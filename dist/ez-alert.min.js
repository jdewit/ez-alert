"use_strict";angular.module("ez.alert",[]).constant("EzAlertConfig",{successClass:"alert alert-success",warningClass:"alert alert-warning",errorClass:"alert alert-danger",delay:8e3,maxAlerts:5,insertFirst:!0}).directive("ezAlert",["EzAlert",function(a){return{restrict:"EA",templateUrl:"ez-alert-tpl.html",link:function(b){b.$watch(a.get,function(){b.alerts=a.get()}),b.hideAlert=function(c){a.hide(a,b.alerts[c],0)}}}}]).service("EzAlert",["$interval","$sce","EzAlertConfig",function(a,b,c){var d=[];return{clear:function(){d=[]},get:function(){return d},error:function(a,b){this.add("error",a,b)},warning:function(a,b){this.add("warning",a,b)},success:function(a,b){this.add("success",a,b)},add:function(e,f,g){var h={alertClass:c[e+"Class"],msg:b.trustAsHtml(f)},i=this.findDuplicates(h);i||(h.showPromise=a(function(){h.show=!0},1,1),this.hideExcessAlerts(this),c.insertFirst?d.unshift(h):d.push(h),g||this.hide(this,h,c.delay))},findDuplicates:function(a){for(var b=this,c=0,e=d.length;e>c;c++){var f=d[c];if(f.alertClass===a.alertClass&&f.msg.$$unwrapTrustedValue()===a.msg.$$unwrapTrustedValue())return b.hideAndShow(f),!0}return!1},hideExcessAlerts:function(a){if(d.length>=c.maxAlerts)for(var b=d.length-c.maxAlerts+1,e=0,f=b;f>e;e++)c.insertFirst?a.hide(a,d[d.length-(e+1)],0,!0):a.hide(a,d[e],0,!0)},hide:function(b,c,d,e){var f=e?1e3:d+1e3;c.hidePromise=a(function(){b.hideInterval(c)},d,1),c.removePromise=a(function(){b.removeInterval(c)},f,1)},showInterval:function(a){a.hide=!1,a.show=!0},hideInterval:function(a){a.show=!1,a.hide=!0},removeInterval:function(a){d.splice(d.indexOf(a),1)},hideAndShow:function(b){var d=this;(b.hidePromise||b.removePromise)&&(b.hidePromise&&a.cancel(b.hidePromise),b.removePromise&&a.cancel(b.removePromise)),d.hideInterval(b),a(function(){d.showInterval(b),d.hide(d,b,c.delay)},500,1)}}}]);