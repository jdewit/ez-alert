"use_strict";angular.module("ez.alert",[]).constant("EzAlertConfig",{successClass:"alert alert-success",warningClass:"alert alert-warning",errorClass:"alert alert-danger",delay:8e3,maxAlerts:5,insertFirst:!0}).directive("ezAlert",["EzAlert",function(a){return{restrict:"EA",templateUrl:"ez-alert-tpl.html",link:function(b){b.$watch(a.get,function(){b.alerts=a.get()}),b.hideAlert=function(c){a.hide(a,b.alerts[c],0)}}}}]).service("EzAlert",["$interval","EzAlertConfig",function(a,b){var c=[];return{clear:function(){c=[]},get:function(){return c},error:function(a,b){this.add("error",a,b)},warning:function(a,b){this.add("warning",a,b)},success:function(a,b){this.add("success",a,b)},add:function(d,e,f){var g={alertClass:b[d+"Class"],msg:e},h=this.findDuplicates(g);h||(g.showPromise=a(function(){g.show=!0},1,1),this.hideExcessAlerts(this),b.insertFirst?c.unshift(g):c.push(g),f||this.hide(this,g,b.delay))},findDuplicates:function(a){for(var b=this,d=0,e=c.length;e>d;d++){var f=c[d];if(f.alertClass===a.alertClass&&f.msg===a.msg)return b.hideAndShow(f),!0}return!1},hideExcessAlerts:function(a){if(c.length>=b.maxAlerts)for(var d=c.length-b.maxAlerts+1,e=0,f=d;f>e;e++)b.insertFirst?a.hide(a,c[c.length-(e+1)],0,!0):a.hide(a,c[e],0,!0)},hide:function(b,c,d,e){var f=e?1e3:d+1e3;c.hidePromise=a(function(){b.hideInterval(c)},d,1),c.removePromise=a(function(){b.removeInterval(c)},f,1)},showInterval:function(a){a.hide=!1,a.show=!0},hideInterval:function(a){a.show=!1,a.hide=!0},removeInterval:function(a){c.splice(c.indexOf(a),1)},hideAndShow:function(c){var d=this;(c.hidePromise||c.removePromise)&&(c.hidePromise&&a.cancel(c.hidePromise),c.removePromise&&a.cancel(c.removePromise)),d.hideInterval(c),a(function(){d.showInterval(c),d.hide(d,c,b.delay)},500,1)}}}]);